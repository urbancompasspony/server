#!/bin/bash

function createvm {
virt-install --import \
--name pfSense \
--boot hd,cdrom,menu=on \
--memory 2048 \
--vcpus 2 \
--cpu host \
--network macvtap=enp1s0,model=virtio \
--network macvtap=enp2s0,model=virtio \
--disk /var/lib/libvirt/images/pfsense.img \
--os-variant=freebsd13.1 \
--graphics vnc \
--import \
--autostart
}

[ -f /var/lib/libvirt/images/pfsense.img ] &&
  createvm
} || {
  clear
  echo "Imagem não encontrada. Favor conferir a existência de pfsense.img!"
  sleep 3
}

exit 1
