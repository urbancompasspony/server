#!/bin/bash

function start {

VALUE1=""
VALUE2=""
VALUE3=""
VALUE4="-d WORKGROUP"
VALUE5=""

VALUE0=$(dialog --ok-label "Conectar" --title " " --form "Conexão RDP" 15 50 0 \
"IP: " 1 1 "$VALUE1" 1 10 34 0 \
"USER:" 2 1 "$VALUE2" 2 10 34 0 \
"PASS:" 3 1 "$VALUE3" 3 10 34 0 \
"DOM:" 4 1 "$VALUE4" 4 10 34 0 \
3>&1 1>&2 2>&3 3>&- > /dev/tty)
[ $? -ne 0 ] && m10
IP1=$(echo "$VALUE0" | sed -n 1p)
user2=$(echo "$VALUE0" | sed -n 2p)
pass2=$(echo "$VALUE0" | sed -n 3p)
dmn2=$(echo "$VALUE0" | sed -n 4p)

[ -z "$IP1" ] || [ -z "$user2" ] || [ -z "$pass2" ] || [ -z "$dmn2" ] && {
  dialog --title "ERRO" --msgbox "Não deixe nenhum campo vazio!" 8 40
  exit
} || {
  echo "rdesktop -u $user2 -p $pass2 $dom $IP1" > /tmp/.rdesktop
  chmod +x /tmp/.rdesktop
  /tmp/.rdesktop
  exit
  }
}

start
